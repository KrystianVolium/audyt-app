<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://api.fontshare.com; font-src 'self' https://api.fontshare.com https://cdn.fontshare.com; img-src 'self' data:; connect-src 'self' http://localhost:3000 https://*.netlify.app https://audyt-backend.onrender.com;">
    <title>Audyt Kondycji Marki | Wersja Finalna</title>
 
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@700,500,400&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
 
    <style>
        :root {
            --bg-color: #080808;
            --surface-color: #0F0F0F;
            --primary-color: #F4F4F4;
            --primary-glow: rgba(244, 244, 244, 0.4);
            --text-color: #D8D8D8;
            --text-muted: #707070;
            --border-color: #2C2C2C;
            --glow-critical: #ff4d4d;
            --glow-reactive: #ffa500;
            --glow-proactive: #00aaff;
            --glow-strategic: #F4F4F4;
        }
 
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
 
        body {
            font-family: 'Satoshi', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            font-weight: 400;
        }
 
        .audit-container {
            width: 100%; max-width: 800px; background: var(--surface-color);
            border: 1px solid var(--border-color); border-radius: 16px; padding: 40px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
 
        h1, h2, h3 {
            font-weight: 700; letter-spacing: -0.01em; line-height: 1.1;
            text-align: center; color: var(--text-color);
        }
        h1 { font-size: 2.5em; margin-bottom: 10px; }
        h2 { font-size: 2em; margin-bottom: 25px; margin-top: 10px; }
        h3 { font-size: 1.5em; }
 
        h3.pytanie-lustro-tytul {
            text-align: left; margin-top: 40px; margin-bottom: 15px;
        }
 
        p {
            font-size: 1em; line-height: 1.7; color: var(--text-muted);
            margin-bottom: 15px; font-weight: 400;
        }
        .question-block p, .result-card p, #ai-synthesis-container p { color: var(--text-color); }
        .result-card p, #ai-synthesis-container p { color: var(--text-muted); }
 
        strong { color: var(--text-color); font-weight: 700; }
        .intro-subtext { text-align: center; font-size: 1.1em; color: var(--text-muted); }
 
        #logo-container { text-align: center; margin: 0 0 30px 0; }
        #logo-container img, #logo-container svg { max-width: 160px; height: auto; }
 
        .progress-bar {
            width: 100%; height: 10px; background-color: var(--border-color);
            border-radius: 5px; margin-bottom: 40px; overflow: hidden;
            transition: opacity 0.3s ease-in-out, height 0.3s, margin 0.3s;
        }
        #progress {
            width: 0%; height: 100%; background-color: var(--primary-color);
            border-radius: 5px; transition: width 0.4s ease-in-out;
        }
 
        .on-first-step .progress-bar, .on-results-step .progress-bar {
            opacity: 0; height: 0; margin-bottom: 0;
        }
 
        #audit-form { position: relative; }
        .form-step { display: none; animation: fadeIn 0.5s forwards; }
        .form-step.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
 
        .question-block {
            margin-bottom: 20px; padding: 20px; background: rgba(0,0,0,0.2);
            border-radius: 8px; border: 1px solid transparent; transition: border-color 0.3s;
        }
 
        .scale-container {
            display: flex; justify-content: space-around; align-items: flex-start;
            margin-top: 15px; text-align: center;
        }
        .scale-item {
            display: flex; flex-direction: column; align-items: center; width: 20%;
        }
        .scale-container input[type="radio"] { display: none; }
        .scale-container label {
            display: flex; justify-content: center; align-items: center; width: 45px; height: 45px;
            border: 2px solid var(--border-color); border-radius: 50%; cursor: pointer;
            font-weight: 700; font-size: 1.2em; transition: all 0.3s ease; color: var(--text-muted);
            margin-bottom: 8px;
        }
        .scale-container .scale-description {
            min-height: 40px; font-weight: 500; line-height: 1.3;
            font-size: 0.75em; color: var(--text-muted); padding: 0 2px;
        }
        .scale-container label:hover { border-color: var(--text-muted); color: var(--text-color); }
        .scale-container input[type="radio"]:checked + label {
            background-color: var(--primary-color); color: #000000;
            border-color: var(--primary-color); transform: scale(1.1);
            box-shadow: 0 0 15px var(--primary-glow);
        }
 
        textarea {
            width: 100%; min-height: 120px; padding: 15px; font-family: 'Satoshi', sans-serif;
            font-size: 1em; border: 1px solid var(--border-color); border-radius: 8px;
            background-color: var(--bg-color); color: var(--text-color); margin-top: 10px;
            transition: border-color 0.3s, box-shadow 0.3s;
            font-weight: 400;
        }
        textarea:focus, input[type="text"]:focus {
            outline: none; border-color: var(--primary-color); box-shadow: 0 0 10px var(--primary-glow);
        }
 
        .form-navigation { display: flex; justify-content: space-between; margin-top: 30px; }
        .btn {
            padding: 12px 30px; border: none; border-radius: 50px; font-family: 'Satoshi', sans-serif;
            font-weight: 700; font-size: 1em; cursor: pointer; transition: all 0.3s ease;
            background: var(--surface-color); color: var(--text-color); border: 1px solid var(--border-color);
            text-transform: uppercase;
            text-decoration: none;
        }
        .btn:hover { border-color: var(--text-color); }
        .btn-primary {
            background: var(--primary-color); color: #000000; border: 1px solid var(--primary-color);
        }
        .btn-primary:hover {
            box-shadow: 0 0 20px var(--primary-glow); transform: translateY(-2px);
        }
 
        #results-step { text-align: center; }
 
        #pre-results-loader {
            min-height: 300px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; animation: fadeIn 0.5s forwards;
        }

        #radical-clarity-image {
            max-width: 600px; width: 100%; height: auto;
            margin-bottom: 30px;
            animation: subtleGlow 3s ease-in-out infinite alternate;
            background: transparent;
            border: none;
            box-shadow: none;
        }

        @keyframes subtleGlow {
            0% { filter: brightness(1) drop-shadow(0 0 10px rgba(244, 244, 244, 0.3)); }
            100% { filter: brightness(1.05) drop-shadow(0 0 20px rgba(244, 244, 244, 0.5)); }
        }

        #processing-text {
            font-size: 1.3em; color: var(--primary-color); font-weight: 600;
            animation: pulse 2s ease-in-out infinite;
            text-align: center; letter-spacing: 0.5px;
        }
        .progress-bar-final {
            width: 100%; height: 12px; background-color: var(--border-color);
            border-radius: 6px; margin-top: 20px; overflow: hidden;
        }
        #progress-final {
            width: 0%; height: 100%; background-color: var(--primary-color);
            border-radius: 6px;
        }
        #results-content { display: none; }
 
        #capture-area { padding: 1px; } 
        #logo-container-results { text-align: center; margin-bottom: 40px; }
        #logo-container-results img, #logo-container-results svg { max-width: 160px; height: auto; }
        #score-container { font-size: 3em; font-weight: 700; line-height: 1.1; }
        #score-display { color: var(--primary-color); font-size: 2em; }
 
        .result-card {
            background: var(--surface-color); padding: 30px; border-radius: 12px;
            border: 1px solid var(--border-color); margin-top: 20px;
            transition: all 0.5s ease-in-out;
        }
        #ai-synthesis-container {
             background: var(--surface-color); padding: 30px; border-radius: 12px;
            border: 1px solid var(--border-color); margin-top: 20px;
        }
 
        .result-card.glow-critical { border-color: var(--glow-critical); box-shadow: 0 0 25px rgba(255, 77, 77, 0.3); }
        .result-card.glow-reactive { border-color: var(--glow-reactive); box-shadow: 0 0 25px rgba(255, 165, 0, 0.3); }
        .result-card.glow-proactive { border-color: var(--glow-proactive); box-shadow: 0 0 25px rgba(0, 170, 255, 0.3); }
        .result-card.glow-strategic { border-color: var(--glow-strategic); box-shadow: 0 0 25px rgba(244, 244, 244, 0.2); }
 
        .result-card h3, #ai-synthesis-container h3, #next-steps-gibberish h3, #next-steps-content h3 {
            color: var(--text-color); margin-bottom: 15px;
        }
 
        #ai-loader { display: none; margin-top: 20px; }
        @keyframes pulse {
            0% { opacity: 0.6; transform: translateY(0px); }
            50% { opacity: 1; transform: translateY(-2px); }
            100% { opacity: 0.6; transform: translateY(0px); }
        }
        #ai-loader p { animation: pulse 2s infinite; color: var(--text-muted); text-align: center; font-weight: 600;}
 
        #final-cta-btn { display: inline-block; }
        #download-btn { margin: 25px auto; display: none; }
        #next-steps { margin-top: 40px; }
        #next-steps h3 { margin-bottom: 15px; }
 
        .signature-footer {
            text-align: center; margin-top: 50px; border-top: 1px solid var(--border-color);
            padding-top: 30px;
        }
        .signature-footer p {
            font-size: 0.8em; color: var(--text-muted); margin-bottom: 15px;
        }
        .signature-footer img, .signature-footer svg {
            width: 100px; height: auto; opacity: 0.7;
        }
 
        .on-first-step .signature-footer, .on-results-step .signature-footer { 
            display: none; 
        }
 
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-10px); }
        }

        .fade-out {
            animation: fadeOut 0.4s ease-out forwards;
        }

        @media (max-width: 768px) {
            .audit-container { padding: 20px; }
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            .intro-subtext { line-height: 1.4; }
            .btn { padding: 10px 20px; font-size: 0.85em; }
            .scale-container label { width: 40px; height: 40px; font-size: 1.1em; }

            #radical-clarity-image {
                max-width: 400px; margin-bottom: 25px;
            }

            #processing-text {
                font-size: 1.1em; letter-spacing: 0.3px;
            }
        }

        @media (max-width: 480px) {
            #radical-clarity-image {
                max-width: 350px; margin-bottom: 20px;
            }

            #processing-text {
                font-size: 1em;
            }
        }

        /* Segmenty u≈ºytkownika */
        .segment-choice-container {
            display: flex !important; gap: 20px; justify-content: space-between; margin: 40px auto;
            max-width: 800px; align-items: stretch;
        }
        .segment-card {
            flex: 0 0 calc(50% - 10px); max-width: 380px; min-width: 280px; padding: 30px;
            border: 2px solid var(--border-color);
            border-radius: 12px; cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background-color 0.3s ease;
            background: var(--surface-color); text-align: center;
        }
        .segment-card:hover {
            border-color: var(--primary-color);
            background-color: rgba(244, 244, 244, 0.03);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(244, 244, 244, 0.15);
        }
        .segment-card.selected {
            border-color: var(--primary-color);
        }
        .segment-icon {
            font-size: 3em; margin-bottom: 15px;
        }
        .segment-card h3 {
            color: var(--text-color); margin-bottom: 10px; font-size: 1.3em;
        }
        .segment-card p {
            color: var(--text-muted); font-size: 0.9em;
        }

        /* CTA Buttons Container */
        .cta-buttons-container {
            display: flex !important;
            flex-direction: row !important;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin-top: 25px;
            flex-wrap: nowrap !important;
        }
        .cta-buttons-container .btn {
            white-space: nowrap;
            margin: 0 !important;
        }
        @media (max-width: 768px) {
            .cta-buttons-container {
                flex-direction: column; gap: 12px;
            }
            .cta-buttons-container .btn {
                width: 100%;
            }
        }

        /* === NEW: 3-SCREEN RESULTS FLOW === */
        .result-screen {
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .result-screen.active {
            opacity: 1;
        }

        /* SCREEN 1: Shareable Graphic */
        #shareable-graphic-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
            max-width: 100%;
        }
        #shareable-canvas {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        .screen-1-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .screen-1-buttons .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            min-width: 200px;
        }

        /* SCREEN 2: AI Analysis */
        .analysis-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .author-photo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 20px;
            display: block;
            border: 3px solid var(--primary-color);
            box-shadow: 0 4px 16px rgba(178, 140, 255, 0.3);
        }
        .author-greeting {
            font-size: 2em;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }
        .ai-analysis-content {
            background: rgba(44, 44, 44, 0.3);
            border: 1px solid #2C2C2C;
            border-radius: 12px;
            padding: 40px;
            margin: 30px auto;
            max-width: 800px;
            line-height: 1.8;
            font-size: 1.1em;
        }
        #ai-loader-screen2 {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }
        #ai-loader-screen2 p {
            animation: pulse 2s infinite;
        }
        #ai-analysis-text {
            color: var(--text-primary);
            white-space: pre-wrap;
        }
        #go-to-cta-btn {
            display: block;
            margin: 40px auto 0;
            padding: 15px 40px;
            font-size: 1.1em;
            min-width: 250px;
        }

        /* SCREEN 3: CTA Hub */
        .cta-hub-title {
            text-align: center;
            font-size: 2.5em;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 50px;
        }
        .cta-hub-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1000px;
            margin: 0 auto 60px;
        }
        .cta-hub-card {
            background: rgba(44, 44, 44, 0.3);
            border: 2px solid #2C2C2C;
            border-radius: 16px;
            padding: 40px 30px;
            text-align: center;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }
        .cta-hub-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 8px 32px rgba(178, 140, 255, 0.3);
            transform: translateY(-5px);
        }
        .cta-icon {
            font-size: 3em;
            margin-bottom: 20px;
        }
        .cta-hub-card h3 {
            font-size: 1.5em;
            font-weight: 700;
            margin: 0 0 15px 0;
            color: var(--text-primary);
        }
        .cta-hub-card p {
            font-size: 1em;
            color: var(--text-muted);
            margin: 0;
            line-height: 1.6;
        }
        .social-footer {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid #2C2C2C;
            max-width: 600px;
            margin: 0 auto;
        }
        .social-footer p {
            color: var(--text-muted);
            margin-bottom: 15px;
        }
        .social-links {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        .social-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 0.95em;
            transition: color 0.3s ease;
        }
        .social-links a:hover {
            color: var(--primary-color);
        }

        /* Responsive adjustments for new screens */
        @media (max-width: 768px) {
            #shareable-canvas {
                border-radius: 8px;
            }
            .screen-1-buttons {
                flex-direction: column;
                gap: 15px;
            }
            .screen-1-buttons .btn {
                width: 100%;
                min-width: auto;
            }
            .author-photo {
                width: 100px;
                height: 100px;
            }
            .author-greeting {
                font-size: 1.5em;
            }
            .ai-analysis-content {
                padding: 25px;
                font-size: 1em;
            }
            .cta-hub-title {
                font-size: 1.8em;
            }
            .cta-hub-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .cta-hub-card {
                padding: 30px 20px;
            }
        }
        @media (max-width: 480px) {
            .author-greeting {
                font-size: 1.3em;
            }
            .cta-hub-title {
                font-size: 1.5em;
            }
            .cta-icon {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="audit-container">
        <div class="progress-bar">
            <div id="progress"></div>
        </div>
 
        <form id="audit-form" autocomplete="off">
            <!-- Ekran 0: Wyb√≥r segmentu -->
            <div class="form-step active">
                <div id="logo-container">
                    <img src="twoje-logo.svg.svg" alt="Logo Firmy">
                </div>
                <h1>Audyt Kondycji Marki</h1>
                <p class="intro-subtext">Narzƒôdzie diagnostyczne dla lider√≥w, kt√≥rzy chcƒÖ przestaƒá zgadywaƒá i zaczƒÖƒá wygrywaƒá.</p>

                <h2 style="margin-top: 50px; margin-bottom: 10px;">Dla kogo budujesz markƒô?</h2>

                <div class="segment-choice-container">
                    <div class="segment-card" data-segment="company">
                        <div class="segment-icon">üè¢</div>
                        <h3>ZarzƒÖdzam MarkƒÖ Firmy</h3>
                        <p>Zesp√≥≈Ç, organizacja, biznes B2B/B2C</p>
                    </div>
                    <div class="segment-card" data-segment="personal">
                        <div class="segment-icon">üë§</div>
                        <h3>Budujƒô Markƒô OsobistƒÖ</h3>
                        <p>Freelancer, ekspert, tw√≥rca, konsultant</p>
                    </div>
                </div>

                <div class="form-navigation" style="justify-content: center;">
                    <button type="button" class="btn btn-primary btn-next" id="segment-next-btn" disabled style="opacity: 0.5;">Dalej</button>
                </div>
            </div>

            <!-- Ekran 1: Personalizacja -->
            <div class="form-step">
                <div id="logo-container">
                    <img src="twoje-logo.svg.svg" alt="Logo Firmy">
                </div>
                <h1>Audyt Kondycji Marki</h1>
                <p class="intro-subtext">Narzƒôdzie diagnostyczne dla lider√≥w, kt√≥rzy chcƒÖ przestaƒá zgadywaƒá i zaczƒÖƒá wygrywaƒá.</p>

                <div style="max-width: 400px; margin: 30px auto;">
                    <div style="margin-bottom: 20px;">
                        <label for="user-name" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-color);">Twoje imiƒô:</label>
                        <input type="text" id="user-name" placeholder="np. Anna" style="width: 100%; padding: 12px; font-family: 'Satoshi', sans-serif; font-size: 1em; border: 1px solid var(--border-color); border-radius: 8px; background-color: var(--bg-color); color: var(--text-color); transition: border-color 0.3s, box-shadow 0.3s;">
                    </div>
                    <div style="margin-bottom: 20px;">
                        <label for="brand-name" id="brand-name-label" style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-color);">Nazwa Twojej marki/firmy:</label>
                        <input type="text" id="brand-name" placeholder="np. ABC Marketing" style="width: 100%; padding: 12px; font-family: 'Satoshi', sans-serif; font-size: 1em; border: 1px solid var(--border-color); border-radius: 8px; background-color: var(--bg-color); color: var(--text-color); transition: border-color 0.3s, box-shadow 0.3s;">
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" class="btn btn-prev">Wr√≥ƒá</button>
                    <button type="button" class="btn btn-primary btn-next">Zaczynam</button>
                </div>
            </div>
 
            <div class="form-step">
                <h2>Sekcja I: Rdze≈Ñ Strategiczny</h2>
                <!-- Q1 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>1. Nasz cel istnienia (Brand Purpose) jest na tyle klarowny i wdro≈ºony, ≈ºe pracownicy na ka≈ºdym szczeblu potrafiƒÖ na jego podstawie samodzielnie podejmowaƒá sp√≥jne decyzje.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q1-1" name="q1" value="1"><label for="q1-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1-2" name="q1" value="2"><label for="q1-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1-3" name="q1" value="3"><label for="q1-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1-4" name="q1" value="4"><label for="q1-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1-5" name="q1" value="5"><label for="q1-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q1 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>1. M√≥j cel istnienia jako eksperta/tw√≥rcy (Personal Brand Purpose) jest na tyle klarowny, ≈ºe potrafiƒô szybko oceniƒá czy nowy projekt, wsp√≥≈Çpraca czy klient sƒÖ zgodne z mojƒÖ misjƒÖ.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q1p-1" name="q1" value="1"><label for="q1p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1p-2" name="q1" value="2"><label for="q1p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1p-3" name="q1" value="3"><label for="q1p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1p-4" name="q1" value="4"><label for="q1p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q1p-5" name="q1" value="5"><label for="q1p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q2 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                     <p><strong>2. Nasza d≈Çugoterminowa wizja jest tak precyzyjnym filtrem, ≈ºe regularnie i bez wahania odrzucamy "dobre" okazje i projekty, kt√≥re do niej nie pasujƒÖ.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q2-1" name="q2" value="1"><label for="q2-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2-2" name="q2" value="2"><label for="q2-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2-3" name="q2" value="3"><label for="q2-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2-4" name="q2" value="4"><label for="q2-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2-5" name="q2" value="5"><label for="q2-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q2 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                     <p><strong>2. Moja d≈Çugoterminowa wizja jest tak precyzyjnym filtrem, ≈ºe regularnie i bez wahania odrzucam "dobre" okazje i projekty, kt√≥re do niej nie pasujƒÖ.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q2p-1" name="q2" value="1"><label for="q2p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2p-2" name="q2" value="2"><label for="q2p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2p-3" name="q2" value="3"><label for="q2p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2p-4" name="q2" value="4"><label for="q2p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q2p-5" name="q2" value="5"><label for="q2p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q3 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>3. Nasze zasady marki (Brand Principles) dzia≈ÇajƒÖ jak system operacyjny dla firmy, dostarczajƒÖc jasnych kryteri√≥w dla kluczowych decyzji - od marketingu, przez sprzeda≈º, po rekrutacjƒô.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q3-1" name="q3" value="1"><label for="q3-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3-2" name="q3" value="2"><label for="q3-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3-3" name="q3" value="3"><label for="q3-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3-4" name="q3" value="4"><label for="q3-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3-5" name="q3" value="5"><label for="q3-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q3 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>3. Moje zasady marki osobistej (Brand Principles) dzia≈ÇajƒÖ jak wewnƒôtrzny kompas ‚Äì pomagajƒÖ mi wybieraƒá projekty, ustalaƒá granice i komunikowaƒá warto≈õci w spos√≥b autentyczny i konsekwentny.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q3p-1" name="q3" value="1"><label for="q3p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3p-2" name="q3" value="2"><label for="q3p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3p-3" name="q3" value="3"><label for="q3p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3p-4" name="q3" value="4"><label for="q3p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q3p-5" name="q3" value="5"><label for="q3p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <h3 class="pytanie-lustro-tytul">Pytanie Lustro</h3>
                <!-- Mirror Q1 dla Marki Firmy -->
                <p data-segment="company">Gdyby≈õ jutro zamknƒÖ≈Ç firmƒô, za czym, opr√≥cz produktu/us≈Çugi, najbardziej zatƒôskniliby Twoi klienci i pracownicy?</p>
                <!-- Mirror Q1 dla Marki Osobistej -->
                <p data-segment="personal">Gdyby≈õ jutro zako≈Ñczy≈Ç swojƒÖ dzia≈Çalno≈õƒá, za czym najbardziej zatƒôskni≈Çyby osoby, kt√≥re ciƒô obserwujƒÖ i z tobƒÖ wsp√≥≈ÇpracujƒÖ ‚Äì opr√≥cz samych produkt√≥w czy us≈Çug?</p>
                <textarea id="mirror-q1" placeholder="Twoja odpowied≈∫..."></textarea>
                <div class="form-navigation">
                    <button type="button" class="btn btn-prev">Wr√≥ƒá</button>
                    <button type="button" class="btn btn-primary btn-next">Dalej</button>
                </div>
            </div>
 
            <div class="form-step">
                <h2>Sekcja II: Pozycjonowanie Rynkowe</h2>
                 <!-- Q4 dla Marki Firmy -->
                 <div class="question-block" data-segment="company">
                    <p><strong>4. Nasi idealni klienci postrzegajƒÖ naszƒÖ ofertƒô jako unikatnƒÖ i potrafiƒÖ jasno wskazaƒá, dlaczego jeste≈õmy dla nich jedynym logicznym wyborem na rynku.</strong></p>
                     <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q4-1" name="q4" value="1"><label for="q4-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4-2" name="q4" value="2"><label for="q4-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4-3" name="q4" value="3"><label for="q4-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4-4" name="q4" value="4"><label for="q4-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4-5" name="q4" value="5"><label for="q4-5">5</label><span class="scale-description"></span></div>
                     </div>
                 </div>
                 <!-- Q4 dla Marki Osobistej -->
                 <div class="question-block" data-segment="personal">
                    <p><strong>4. Moi idealni klienci postrzegajƒÖ mojƒÖ ofertƒô jako unikatowƒÖ i potrafiƒÖ jasno wskazaƒá, dlaczego jestem dla nich jedynym logicznym wyborem na rynku.</strong></p>
                     <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q4p-1" name="q4" value="1"><label for="q4p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4p-2" name="q4" value="2"><label for="q4p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4p-3" name="q4" value="3"><label for="q4p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4p-4" name="q4" value="4"><label for="q4p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q4p-5" name="q4" value="5"><label for="q4p-5">5</label><span class="scale-description"></span></div>
                     </div>
                 </div>
                <!-- Q5 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                     <p><strong>5. Nasze rozmowy o cenie koncentrujƒÖ siƒô na zwrocie z inwestycji (ROI) i warto≈õci biznesowej dla klienta, a nie na por√≥wnaniach z konkurencjƒÖ czy liczbie roboczogodzin.</strong></p>
                     <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q5-1" name="q5" value="1"><label for="q5-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5-2" name="q5" value="2"><label for="q5-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5-3" name="q5" value="3"><label for="q5-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5-4" name="q5" value="4"><label for="q5-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5-5" name="q5" value="5"><label for="q5-5">5</label><span class="scale-description"></span></div>
                     </div>
                 </div>
                <!-- Q5 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                     <p><strong>5. Moje rozmowy o cenie koncentrujƒÖ siƒô na zwrocie z inwestycji (ROI) i warto≈õci biznesowej dla klienta, a nie na por√≥wnaniach z konkurencjƒÖ czy liczbie roboczogodzin.</strong></p>
                     <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q5p-1" name="q5" value="1"><label for="q5p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5p-2" name="q5" value="2"><label for="q5p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5p-3" name="q5" value="3"><label for="q5p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5p-4" name="q5" value="4"><label for="q5p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q5p-5" name="q5" value="5"><label for="q5p-5">5</label><span class="scale-description"></span></div>
                     </div>
                 </div>
                <!-- Q6 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                     <p><strong>6. Dziƒôki precyzyjnej specjalizacji i komunikacji, przyciƒÖgamy niemal wy≈ÇƒÖcznie klient√≥w, kt√≥rzy idealnie pasujƒÖ do naszego profilu i z kt√≥rymi chcemy pracowaƒá.</strong></p>
                     <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q6-1" name="q6" value="1"><label for="q6-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6-2" name="q6" value="2"><label for="q6-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6-3" name="q6" value="3"><label for="q6-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6-4" name="q6" value="4"><label for="q6-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6-5" name="q6" value="5"><label for="q6-5">5</label><span class="scale-description"></span></div>
                     </div>
                 </div>
                <!-- Q6 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                     <p><strong>6. Dziƒôki precyzyjnej specjalizacji i komunikacji, przyciƒÖgam niemal wy≈ÇƒÖcznie klient√≥w, kt√≥rzy idealnie pasujƒÖ do mojego profilu i z kt√≥rymi chcƒô pracowaƒá.</strong></p>
                     <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q6p-1" name="q6" value="1"><label for="q6p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6p-2" name="q6" value="2"><label for="q6p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6p-3" name="q6" value="3"><label for="q6p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6p-4" name="q6" value="4"><label for="q6p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q6p-5" name="q6" value="5"><label for="q6p-5">5</label><span class="scale-description"></span></div>
                     </div>
                 </div>
                <h3 class="pytanie-lustro-tytul">Pytanie Lustro</h3>
                <!-- Mirror Q2 dla Marki Firmy -->
                <p data-segment="company">Jaki jest najwiƒôkszy, niewykorzystany potencja≈Ç w Twojej firmie, kt√≥ry m√≥g≈Çby zrewolucjonizowaƒá TwojƒÖ pozycjƒô na rynku?</p>
                <!-- Mirror Q2 dla Marki Osobistej -->
                <p data-segment="personal">Jaki jest najwiƒôkszy, niewykorzystany potencja≈Ç w Twojej osobistej marce eksperckiej, kt√≥ry m√≥g≈Çby zrewolucjonizowaƒá TwojƒÖ pozycjƒô na rynku?</p>
                <textarea id="mirror-q2" placeholder="Twoja odpowied≈∫..."></textarea>
                <div class="form-navigation">
                    <button type="button" class="btn btn-prev">Wr√≥ƒá</button>
                    <button type="button" class="btn btn-primary btn-next">Dalej</button>
                </div>
            </div>
 
             <div class="form-step">
                <h2>Sekcja III: Komunikacja i Budowanie Popytu</h2>
                <!-- Q7 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>7. Nasz g≈Ços i styl wizualny (Tone of Voice & Style) sƒÖ tak wyraziste, ≈ºe klienci rozpoznaliby naszƒÖ komunikacjƒô, nawet gdyby usunƒÖƒá z niej logo.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q7-1" name="q7" value="1"><label for="q7-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7-2" name="q7" value="2"><label for="q7-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7-3" name="q7" value="3"><label for="q7-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7-4" name="q7" value="4"><label for="q7-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7-5" name="q7" value="5"><label for="q7-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q7 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>7. M√≥j g≈Ços i styl wizualny (Tone of Voice & Style) sƒÖ tak wyraziste, ≈ºe klienci rozpoznaliby mojƒÖ komunikacjƒô, nawet gdyby usunƒÖƒá z niej logo.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q7p-1" name="q7" value="1"><label for="q7p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7p-2" name="q7" value="2"><label for="q7p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7p-3" name="q7" value="3"><label for="q7p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7p-4" name="q7" value="4"><label for="q7p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q7p-5" name="q7" value="5"><label for="q7p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q8 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>8. Nasze tre≈õci (artyku≈Çy, wideo, case studies) sƒÖ tak warto≈õciowe, ≈ºe regularnie generujƒÖ konkretne zapytania od idealnych, wstƒôpnie przekonanych klient√≥w.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q8-1" name="q8" value="1"><label for="q8-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8-2" name="q8" value="2"><label for="q8-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8-3" name="q8" value="3"><label for="q8-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8-4" name="q8" value="4"><label for="q8-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8-5" name="q8" value="5"><label for="q8-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q8 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>8. Moje tre≈õci (artyku≈Çy, wideo, case studies) sƒÖ tak warto≈õciowe, ≈ºe regularnie generujƒÖ konkretne zapytania od idealnych, wstƒôpnie przekonanych klient√≥w.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q8p-1" name="q8" value="1"><label for="q8p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8p-2" name="q8" value="2"><label for="q8p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8p-3" name="q8" value="3"><label for="q8p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8p-4" name="q8" value="4"><label for="q8p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q8p-5" name="q8" value="5"><label for="q8p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q9 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>9. Ka≈ºdy pracownik majƒÖcy kontakt z klientem potrafi opowiedzieƒá historiƒô naszej marki w spos√≥b, kt√≥ry jasno uzasadnia naszƒÖ warto≈õƒá i cenƒô.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q9-1" name="q9" value="1"><label for="q9-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9-2" name="q9" value="2"><label for="q9-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9-3" name="q9" value="3"><label for="q9-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9-4" name="q9" value="4"><label for="q9-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9-5" name="q9" value="5"><label for="q9-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q9 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>9. W ka≈ºdej interakcji ‚Äì czy to w mediach spo≈Çeczno≈õciowych, wystƒÖpieniach czy rozmowach 1-on-1 ‚Äì komunikujƒô mojƒÖ unikalnƒÖ warto≈õƒá w spos√≥b, kt√≥ry naturalnie przek≈Çada siƒô na zainteresowanie mojƒÖ ofertƒÖ.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q9p-1" name="q9" value="1"><label for="q9p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9p-2" name="q9" value="2"><label for="q9p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9p-3" name="q9" value="3"><label for="q9p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9p-4" name="q9" value="4"><label for="q9p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q9p-5" name="q9" value="5"><label for="q9p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <h3 class="pytanie-lustro-tytul">Pytanie Lustro</h3>
                <!-- Mirror Q3 dla Marki Firmy -->
                <p data-segment="company">Gdyby≈õ m√≥g≈Ç zachowaƒá tylko jeden, jedyny element waszej komunikacji (jeden artyku≈Ç, film, case study), kt√≥ry najskuteczniej zamienia obcych ludzi w p≈ÇacƒÖcych klient√≥w ‚Äì co by to by≈Ço i na czym polega jego si≈Ça?</p>
                <!-- Mirror Q3 dla Marki Osobistej -->
                <p data-segment="personal">Gdyby≈õ m√≥g≈Ç zachowaƒá tylko jeden, jedyny element twojej komunikacji (jeden post, artyku≈Ç, film, wystƒÖpienie), kt√≥ry najskuteczniej przekonuje ludzi do wsp√≥≈Çpracy z tobƒÖ ‚Äì co by to by≈Ço i na czym polega jego si≈Ça?</p>
                <textarea id="mirror-q3" placeholder="Twoja odpowied≈∫..."></textarea>
                <div class="form-navigation">
                    <button type="button" class="btn btn-prev">Wr√≥ƒá</button>
                    <button type="button" class="btn btn-primary btn-next">Dalej</button>
                </div>
            </div>
 
            <div class="form-step">
                <h2>Sekcja IV: Percepcja i Sp√≥jno≈õƒá Strategiczna</h2>
                <!-- Q10 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>10. Nasz wizerunek (design, materia≈Çy, strona WWW) jest w pe≈Çni sp√≥jny z naszƒÖ strategiƒÖ cenowƒÖ i pozycjonowaniem, skutecznie komunikujƒÖc zamierzonƒÖ warto≈õƒá klientom.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q10-1" name="q10" value="1"><label for="q10-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10-2" name="q10" value="2"><label for="q10-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10-3" name="q10" value="3"><label for="q10-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10-4" name="q10" value="4"><label for="q10-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10-5" name="q10" value="5"><label for="q10-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q10 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>10. M√≥j wizerunek (design, materia≈Çy, strona WWW) jest w pe≈Çni sp√≥jny z mojƒÖ strategiƒÖ cenowƒÖ i pozycjonowaniem, skutecznie komunikujƒÖc zamierzonƒÖ warto≈õƒá klientom.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q10p-1" name="q10" value="1"><label for="q10p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10p-2" name="q10" value="2"><label for="q10p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10p-3" name="q10" value="3"><label for="q10p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10p-4" name="q10" value="4"><label for="q10p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q10p-5" name="q10" value="5"><label for="q10p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q11 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>11. Ka≈ºdy punkt styku klienta z naszƒÖ markƒÖ ‚Äì od reklamy, przez proces sprzeda≈ºy, po obs≈Çugƒô ‚Äì jest celowo zaprojektowany, aby wzmacniaƒá naszƒÖ g≈Ç√≥wnƒÖ obietnicƒô rynkowƒÖ.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q11-1" name="q11" value="1"><label for="q11-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11-2" name="q11" value="2"><label for="q11-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11-3" name="q11" value="3"><label for="q11-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11-4" name="q11" value="4"><label for="q11-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11-5" name="q11" value="5"><label for="q11-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q11 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>11. Ka≈ºdy punkt styku klienta z mojƒÖ markƒÖ ‚Äì od reklamy, przez proces sprzeda≈ºy, po obs≈Çugƒô ‚Äì jest celowo zaprojektowany, aby wzmacniaƒá mojƒÖ g≈Ç√≥wnƒÖ obietnicƒô rynkowƒÖ.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q11p-1" name="q11" value="1"><label for="q11p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11p-2" name="q11" value="2"><label for="q11p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11p-3" name="q11" value="3"><label for="q11p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11p-4" name="q11" value="4"><label for="q11p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q11p-5" name="q11" value="5"><label for="q11p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q12 dla Marki Firmy -->
                <div class="question-block" data-segment="company">
                    <p><strong>12. Nasza marka jest postrzegana jako lider lub unikalny specjalista w swojej kategorii, co pozwala nam unikaƒá bezpo≈õredniej konkurencji cenowej.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q12-1" name="q12" value="1"><label for="q12-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12-2" name="q12" value="2"><label for="q12-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12-3" name="q12" value="3"><label for="q12-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12-4" name="q12" value="4"><label for="q12-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12-5" name="q12" value="5"><label for="q12-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <!-- Q12 dla Marki Osobistej -->
                <div class="question-block" data-segment="personal">
                    <p><strong>12. Moja marka jest postrzegana jako lider lub unikalny specjalista w swojej kategorii, co pozwala mi unikaƒá bezpo≈õredniej konkurencji cenowej.</strong></p>
                    <div class="scale-container">
                        <div class="scale-item"><input type="radio" id="q12p-1" name="q12" value="1"><label for="q12p-1">1</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12p-2" name="q12" value="2"><label for="q12p-2">2</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12p-3" name="q12" value="3"><label for="q12p-3">3</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12p-4" name="q12" value="4"><label for="q12p-4">4</label><span class="scale-description"></span></div>
                        <div class="scale-item"><input type="radio" id="q12p-5" name="q12" value="5"><label for="q12p-5">5</label><span class="scale-description"></span></div>
                    </div>
                </div>
                <h3 class="pytanie-lustro-tytul">Pytanie Lustro</h3>
                <!-- Mirror Q4 dla Marki Firmy -->
                <p data-segment="company">Jaka jest jedna, najwa≈ºniejsza zmiana w postrzeganiu waszej marki, kt√≥ra pozwoli≈Çaby wam podwoiƒá mar≈ºƒô lub zdobyƒá klient√≥w, kt√≥rzy dzi≈õ sƒÖ poza waszym zasiƒôgiem?</p>
                <!-- Mirror Q4 dla Marki Osobistej -->
                <p data-segment="personal">Jaka jest jedna, najwa≈ºniejsza zmiana w postrzeganiu ciebie jako eksperta, kt√≥ra pozwoli≈Çaby ci podwoiƒá stawki lub zdobyƒá klient√≥w, kt√≥rzy dzi≈õ sƒÖ poza twoim zasiƒôgiem?</p>
                <textarea id="mirror-q4" placeholder="Twoja odpowied≈∫..."></textarea>
                <div class="form-navigation">
                    <button type="button" class="btn btn-prev">Wr√≥ƒá</button>
                    <button type="button" id="calculate-btn" class="btn btn-primary">Zako≈Ñcz i analizuj</button>
                </div>
            </div>
 
            <div class="form-step" id="results-step">
                <!-- Pre-loader (pokazywany na poczƒÖtku) -->
                <div id="pre-results-loader">
                    <img id="radical-clarity-image" src="Radical Clarity.svg" alt="Radical Clarity">
                    <p id="processing-text">Przetwarzam wnioski</p>
                    <div class="progress-bar-final" style="display: none;">
                        <div id="progress-final"></div>
                    </div>
                </div>

                <!-- EKRAN 1: Shareable Graphic -->
                <div id="result-screen-1" class="result-screen" style="display: none;">
                    <div id="shareable-graphic-container">
                        <canvas id="shareable-canvas" width="1080" height="1920"></canvas>
                    </div>
                    <div class="screen-1-buttons">
                        <button type="button" id="download-graphic-btn" class="btn btn-primary">
                            üì• Pobierz PNG
                        </button>
                        <button type="button" id="go-to-analysis-btn" class="btn btn-primary">
                            Zobacz pe≈ÇnƒÖ analizƒô ‚Üí
                        </button>
                    </div>
                </div>

                <!-- EKRAN 2: AI Analysis -->
                <div id="result-screen-2" class="result-screen" style="display: none;">
                    <div class="analysis-header">
                        <img src="Janawnioski.svg" alt="Krystian DƒÖbrowski" class="author-photo">
                        <h2 class="author-greeting">Cze≈õƒá, tu Krystian</h2>
                    </div>
                    <div class="ai-analysis-content">
                        <div id="ai-loader-screen2">
                            <p>AI analizuje dane, proszƒô czekaƒá...</p>
                        </div>
                        <div id="ai-analysis-text" style="display: none;"></div>
                    </div>
                    <button type="button" id="go-to-cta-btn" class="btn btn-primary">
                        Dalej - Zobacz opcje ‚Üí
                    </button>
                </div>

                <!-- EKRAN 3: CTA Hub -->
                <div id="result-screen-3" class="result-screen" style="display: none;">
                    <h2 class="cta-hub-title">Gotowy na prze≈Çom?</h2>
                    <div class="cta-hub-container">
                        <a href="https://calendly.com/krystian-krystiandabrowski/30min" target="_blank" class="cta-hub-card">
                            <div class="cta-icon">üóìÔ∏è</div>
                            <h3>Um√≥w konsultacjƒô</h3>
                            <p>15 minut, darmowa rozmowa strategiczna</p>
                        </a>
                        <a href="https://www.figma.com/deck/S2Rr6ywbpVeFuv4JxvAzOy/Krystian-D%C4%85browski---Oferta?node-id=33-541&t=kr2DQPRcDIY7AbDL-1&scaling=min-zoom&content-scaling=fixed&page-id=0%3A1" target="_blank" class="cta-hub-card">
                            <div class="cta-icon">üìã</div>
                            <h3>Zobacz ofertƒô</h3>
                            <p>Strategia & Branding dla ambitnych marek</p>
                        </a>
                        <a href="#newsletter" class="cta-hub-card" id="newsletter-cta">
                            <div class="cta-icon">üíå</div>
                            <h3>Zapisz siƒô na newsletter</h3>
                            <p>Tygodniowe insights o strategii marki</p>
                        </a>
                    </div>
                    <div class="social-footer">
                        <p>Znajd≈∫ mnie r√≥wnie≈º na:</p>
                        <div class="social-links">
                            <a href="#" target="_blank">LinkedIn</a>
                            <a href="#" target="_blank">Instagram</a>
                            <a href="#" target="_blank">Twitter</a>
                        </div>
                    </div>
                </div>

                <!-- Gibberish handling -->
                <div id="next-steps-gibberish" style="display: none; text-align: center; margin-top: 30px;">
                    <h3>Prawdziwa diagnoza wymaga zaanga≈ºowania.</h3>
                    <p>To narzƒôdzie zosta≈Ço zaprojektowane, aby dostarczaƒá realnƒÖ warto≈õƒá liderom, kt√≥rzy sƒÖ gotowi na szczerƒÖ autorefleksjƒô.</p>
                    <p style="margin-top:15px;">Je≈õli jeste≈õ got√≥w podej≈õƒá do audytu na powa≈ºnie, zacznij od nowa.</p>
                    <button type="button" id="restart-btn" class="btn btn-primary" style="margin-top: 20px;">Zacznij od nowa</button>
                </div>
            </div>
        </form>
 
        <div class="signature-footer">
            <p>Audyt przygotowany przez:</p>
            <img src="twoje-logo.svg.svg" alt="Logo Firmy">
        </div>
    </div>
    <script>
 
        const API_BASE_URL = 'http://localhost:3000';
        let originalAuditText = '';
        let finalScore, finalResultTitle, finalResultDesc, finalAiText;
        let userName = '', brandName = '';

        document.addEventListener('DOMContentLoaded', () => {
            const auditContainer = document.querySelector('.audit-container');
            const formSteps = document.querySelectorAll('.form-step');
            const totalSteps = formSteps.length;
            const progress = document.getElementById('progress');
            const downloadBtn = document.getElementById('download-btn');
            let currentStep = 0;
            let userSegment = ''; // 'company' lub 'personal'

            // Obs≈Çuga wyboru segmentu
            document.querySelectorAll('.segment-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.segment-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    userSegment = this.dataset.segment;
                    const nextBtn = document.getElementById('segment-next-btn');
                    nextBtn.disabled = false;
                    nextBtn.style.opacity = '1';

                    // Aktualizuj label dla brand name
                    const brandLabel = document.getElementById('brand-name-label');
                    const brandInput = document.getElementById('brand-name');
                    if (userSegment === 'personal') {
                        brandLabel.innerHTML = 'Nazwa Twojej marki osobistej <span style="color: var(--text-muted); font-weight: 400;">(opcjonalne)</span>:';
                        brandInput.placeholder = 'np. Anna Kowalska Coaching';
                    } else {
                        brandLabel.textContent = 'Nazwa Twojej marki/firmy:';
                        brandInput.placeholder = 'np. ABC Marketing';
                    }

                    // Aktualizuj widoczno≈õƒá pyta≈Ñ
                    updateQuestionVisibility();
                });
            });

            // Funkcja ukrywajƒÖca/pokazujƒÖca pytania w zale≈ºno≈õci od segmentu
            const updateQuestionVisibility = () => {
                document.querySelectorAll('[data-segment]:not(.segment-card)').forEach(el => {
                    if (el.dataset.segment === userSegment) {
                        el.style.display = '';
                    } else {
                        el.style.display = 'none';
                    }
                });
                // Zawsze pokazuj obie karty segment√≥w
                document.querySelectorAll('.segment-card').forEach(card => {
                    card.style.display = '';
                });
            };

            const scaleLabelsLong = ["Zdecydowanie nie", "Raczej nie", "Trudno powiedzieƒá", "Raczej tak", "Zdecydowanie tak"];
            const scaleLabelsShort = ["Wcale", "Rzadko", "Czasami", "Czƒôsto", "Zawsze"];
 
            const updateScaleDescriptions = () => {
                const allDescriptions = document.querySelectorAll('.scale-description');
                const labels = window.innerWidth <= 768 ? scaleLabelsShort : scaleLabelsLong;
                allDescriptions.forEach((span, index) => {
                    span.textContent = labels[index % 5];
                });
            };
 
            const updateUI = () => {
                auditContainer.classList.remove('on-first-step', 'on-results-step');
                if (currentStep === 0 || currentStep === 1) {
                    auditContainer.classList.add('on-first-step');
                } else if (currentStep === totalSteps - 1) {
                    auditContainer.classList.add('on-results-step');
                }
                formSteps.forEach((step, index) => { step.classList.toggle('active', index === currentStep); });
                const questionSteps = totalSteps - 3; // pomijamy: wyb√≥r segmentu, personalizacjƒô, wyniki
                const currentQuestionStep = Math.max(0, currentStep - 2);
                const progressPercent = (currentQuestionStep / questionSteps) * 100;
                progress.style.width = `${progressPercent}%`;
                if (currentStep > 1 && currentStep < totalSteps - 1) {
                    auditContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };
 
            const validateStep = (stepIndex) => {
                const step = formSteps[stepIndex];
                if (stepIndex === 0) {
                    // Walidacja wyboru segmentu
                    if (!userSegment) {
                        alert('Proszƒô wybraƒá segment - Marka Firmy lub Marka Osobista.');
                        return false;
                    }
                    return true;
                } else if (stepIndex === 1) {
                    // Walidacja personalizacji - imiƒô i nazwa marki
                    const userNameInput = document.getElementById('user-name');
                    const brandNameInput = document.getElementById('brand-name');

                    userNameInput.style.borderColor = 'var(--border-color)';
                    brandNameInput.style.borderColor = 'var(--border-color)';

                    let isValid = true;

                    if (userNameInput.value.trim().length === 0) {
                        userNameInput.style.borderColor = 'red';
                        isValid = false;
                    }

                    // Dla Marki Firmy wymagana jest nazwa marki, dla Marki Osobistej - opcjonalna
                    if (userSegment === 'company' && brandNameInput.value.trim().length === 0) {
                        brandNameInput.style.borderColor = 'red';
                        isValid = false;
                    }

                    if (!isValid) {
                        alert('Proszƒô wype≈Çniƒá wszystkie wymagane pola, aby przej≈õƒá dalej.');
                        return false;
                    }

                    // Zapisz dane
                    userName = userNameInput.value.trim();
                    brandName = brandNameInput.value.trim();
                    return true;
                } else if (stepIndex > 1 && stepIndex < totalSteps - 1) {
                    let allAnswered = true;
                    const questions = step.querySelectorAll('.question-block:not([style*="display: none"])');
                    questions.forEach(q => {
                        q.style.borderColor = 'transparent';
                        if (!q.querySelector('input[type="radio"]:checked')) {
                            q.style.borderColor = 'red';
                            allAnswered = false;
                        }
                    });
 
                    const textarea = step.querySelector('textarea');
                    if (textarea) {
                        textarea.style.borderColor = 'var(--border-color)';
                        if (textarea.value.trim().length === 0) {
                            textarea.style.borderColor = 'red';
                            allAnswered = false;
                        }
                    }
 
                    if (!allAnswered) {
                        alert('Proszƒô odpowiedzieƒá na wszystkie pytania w tej sekcji, aby przej≈õƒá dalej.');
                    }
                    return allAnswered;
                }
                return true;
            };
 
            document.addEventListener('click', e => {
                if (e.target.matches('.btn-next')) {
                    if (validateStep(currentStep)) { currentStep++; updateUI(); }
                } else if (e.target.matches('#calculate-btn')) {
                    if (validateStep(currentStep)) { 
                        handleCalculation();
                        currentStep++;
                        updateUI();
                    }
                } else if (e.target.matches('.btn-prev')) {
                    currentStep--; updateUI();
                }
            });
 
            const animateValue = (obj, start, end, duration) => {
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    obj.innerHTML = Math.floor(progress * (end - start) + start);
                    if (progress < 1) window.requestAnimationFrame(step);
                };
                window.requestAnimationFrame(step);
            };

            // === NEW: 3-SCREEN FLOW FUNCTIONS ===

            // Function to switch between result screens
            const showResultScreen = (screenNumber) => {
                document.querySelectorAll('.result-screen').forEach(screen => {
                    screen.style.display = 'none';
                    screen.classList.remove('active');
                });
                const targetScreen = document.getElementById(`result-screen-${screenNumber}`);
                if (targetScreen) {
                    targetScreen.style.display = 'block';
                    setTimeout(() => targetScreen.classList.add('active'), 50);
                }
            };

            // Function to draw shareable graphic on canvas (9:16 format, 1080x1920)
            const drawShareableGraphic = (score, levelTitle, levelDesc) => {
                const canvas = document.getElementById('shareable-canvas');
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                const width = 1080;
                const height = 1920;

                // Background
                ctx.fillStyle = '#0F0F0F';
                ctx.fillRect(0, 0, width, height);

                // Gradient overlay
                const gradient = ctx.createLinearGradient(0, 0, 0, height);
                gradient.addColorStop(0, 'rgba(178, 140, 255, 0.05)');
                gradient.addColorStop(1, 'rgba(178, 140, 255, 0)');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, width, height);

                // Logo (text placeholder)
                ctx.fillStyle = '#B28CFF';
                ctx.font = 'bold 48px Satoshi, sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('RADICAL CLARITY', width/2, 150);

                // Personalization
                ctx.fillStyle = '#D8D8D8';
                ctx.font = '32px Satoshi, sans-serif';
                ctx.fillText(`${userName}`, width/2, 250);
                ctx.fillStyle = '#707070';
                ctx.font = '28px Satoshi, sans-serif';
                ctx.fillText(`${brandName}`, width/2, 300);

                // Score circle
                const centerY = 750;
                ctx.strokeStyle = '#2C2C2C';
                ctx.lineWidth = 20;
                ctx.beginPath();
                ctx.arc(width/2, centerY, 200, 0, 2 * Math.PI);
                ctx.stroke();

                // Score progress arc
                const scorePercentage = score / 60;
                const endAngle = -Math.PI/2 + (2 * Math.PI * scorePercentage);

                // Choose color based on score
                let scoreColor = '#B28CFF';
                if (score <= 15) scoreColor = '#FF6B6B';
                else if (score <= 25) scoreColor = '#FFA057';
                else if (score <= 35) scoreColor = '#FFD93D';
                else if (score <= 45) scoreColor = '#6BCF7F';
                else if (score <= 54) scoreColor = '#4ECDC4';

                ctx.strokeStyle = scoreColor;
                ctx.lineWidth = 20;
                ctx.beginPath();
                ctx.arc(width/2, centerY, 200, -Math.PI/2, endAngle);
                ctx.stroke();

                // Score text
                ctx.fillStyle = '#FFFFFF';
                ctx.font = 'bold 120px Satoshi, sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(score, width/2, centerY + 20);
                ctx.font = '40px Satoshi, sans-serif';
                ctx.fillStyle = '#707070';
                ctx.fillText('/ 60', width/2, centerY + 70);

                // Level title
                ctx.fillStyle = '#FFFFFF';
                ctx.font = 'bold 48px Satoshi, sans-serif';
                ctx.textAlign = 'center';
                const titleWords = levelTitle.split(' ');
                let titleY = 1050;
                titleWords.forEach((word, i) => {
                    ctx.fillText(word, width/2, titleY + (i * 60));
                });

                // Level description (wrapped text)
                ctx.fillStyle = '#A0A0A0';
                ctx.font = '28px Satoshi, sans-serif';
                const maxWidth = 900;
                const words = levelDesc.split(' ');
                let line = '';
                let y = titleY + (titleWords.length * 60) + 80;
                const lineHeight = 42;

                words.forEach((word, i) => {
                    const testLine = line + word + ' ';
                    const metrics = ctx.measureText(testLine);
                    if (metrics.width > maxWidth && i > 0) {
                        ctx.fillText(line, width/2, y);
                        line = word + ' ';
                        y += lineHeight;
                    } else {
                        line = testLine;
                    }
                });
                ctx.fillText(line, width/2, y);

                // Footer
                ctx.fillStyle = '#707070';
                ctx.font = '24px Satoshi, sans-serif';
                ctx.fillText('www.radicalclarity.pl', width/2, height - 100);
                ctx.fillText('@krystiandabrowski', width/2, height - 60);
            };

            const calculateTotalScore = () => {
                let totalScore = 0;
                const allCheckedRadios = document.querySelectorAll('#audit-form input[type="radio"]:checked');
                allCheckedRadios.forEach(radio => {
                    totalScore += parseInt(radio.value, 10);
                });
                return totalScore;
            };
 
            // NOWA WERSJA FILTRA - dzia≈Ça teraz te≈º w frontendzie
            const isInputGibberish = (answers) => {
                let totalLength = 0;
                let validAnswers = 0;
                let suspiciousAnswers = 0;

                for (const answer of answers) {
                    const lowerCaseAnswer = answer.toLowerCase().trim();
                    if (lowerCaseAnswer.length === 0) {
                        suspiciousAnswers++;
                        continue;
                    }

                    totalLength += lowerCaseAnswer.length;

                    // Sprawd≈∫ TYLKO kr√≥tkie, bezsensowne odpowiedzi (< 15 znak√≥w)
                    if (lowerCaseAnswer.length < 15) {
                        const veryShortBadWords = ['nie wiem', 'trudno powiedzieƒá', 'test', 'asdf', 'brak', 'xd', 'ok', 'asd', 'qwe', 'zxc', 'brak pomys≈Çu'];
                        if (veryShortBadWords.some(word => lowerCaseAnswer === word || lowerCaseAnswer === word + '.')) {
                            suspiciousAnswers++;
                            continue;
                        }
                    }

                    // Sprawd≈∫ powtarzajƒÖce siƒô znaki (np. "aaaaa", "asdasdasd")
                    if (/^(.{1,3})\1{2,}$/.test(lowerCaseAnswer)) {
                        suspiciousAnswers++;
                        continue;
                    }

                    // Sprawd≈∫ same cyfry
                    if (/^\d+$/.test(lowerCaseAnswer)) {
                        suspiciousAnswers++;
                        continue;
                    }

                    // Sprawd≈∫ losowe ciƒÖgi znak√≥w - mniej ni≈º 15% samog≈Çosek i minimum 5 sp√≥≈Çg≈Çosek z rzƒôdu
                    const vowels = (lowerCaseAnswer.match(/[aƒÖeƒôio√≥uy]/g) || []).length;
                    const consonants = (lowerCaseAnswer.match(/[bcƒádfghjkl≈Çmn≈Ñprs≈õtwz≈∫≈º]/g) || []).length;
                    const hasConsecutiveConsonants = /[bcƒádfghjkl≈Çmn≈Ñprs≈õtwz≈∫≈º]{5,}/.test(lowerCaseAnswer);

                    if (consonants > 0 && vowels / (vowels + consonants) < 0.15 && hasConsecutiveConsonants) {
                        suspiciousAnswers++;
                        continue;
                    }

                    // Je≈õli odpowied≈∫ ma sensownƒÖ d≈Çugo≈õƒá (>= 20 znak√≥w), traktuj jako OK
                    if (lowerCaseAnswer.length >= 20) {
                        validAnswers++;
                    } else if (lowerCaseAnswer.length >= 10) {
                        // ≈örednie odpowiedzi - liczymy jako 0.5
                        validAnswers += 0.5;
                    }
                }

                // KRYTERIA ODRZUCENIA - muszƒÖ byƒá spe≈Çnione WSZYSTKIE:
                // 1. ≈ÅƒÖczna d≈Çugo≈õƒá wszystkich odpowiedzi < 50 znak√≥w
                if (totalLength < 50) return true;

                // 2. Wiƒôcej ni≈º 2 podejrzane odpowiedzi
                if (suspiciousAnswers > 2) return true;

                // 3. Mniej ni≈º 2 sensowne odpowiedzi
                if (validAnswers < 2) return true;

                return false;
            };
 
            // ZASTƒÑP STARƒÑ WERSJƒò FUNKCJI TƒÑ PONI≈ªEJ:
            const handleCalculation = () => {
                finalScore = calculateTotalScore();
                const answers = [
                document.getElementById('mirror-q1').value,
                document.getElementById('mirror-q2').value,
                document.getElementById('mirror-q3').value,
                document.getElementById('mirror-q4').value
            ];
            document.getElementById('pre-results-loader').style.display = 'flex';

            // Najpierw poka≈º krok z wynikami
            document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
            document.getElementById('results-step').classList.add('active');
            document.querySelector('.audit-container').classList.add('on-results-step');
            // Poka≈º loader

            document.getElementById('pre-results-loader').style.display = 'flex';
 
            const progressBar = document.getElementById('progress-final');
            if (progressBar) {
                let width = 0;
                const interval = setInterval(frame, 35);
 
                function frame() {
                    if (width >= 100) {
                        clearInterval(interval);
 
                        // Nie ukrywaj loadera jeszcze - zostaw grafikƒô podczas analizy AI
 
                        if (isInputGibberish(answers)) {
                            // For gibberish, hide loader and show gibberish message
                            setTimeout(() => {
                                const loader = document.getElementById('pre-results-loader');
                                loader.classList.add('fade-out');
                                setTimeout(() => {
                                    loader.style.display = 'none';
                                    document.getElementById('next-steps-gibberish').style.display = 'block';
                                }, 400);
                            }, 1000);
                            return;
                        }
 
                        // Przygotuj dane wynik√≥w (tylko tytu≈Ç i opis - u≈ºywane dla canvas)
                        let title = '', description = '';

                        if (finalScore <= 15) {
                            title = 'Fundamenty wymagajƒÖ budowy';
                            description = 'Twoja marka dzia≈Ça w trybie przetrwania. Brakuje fundament√≥w strategicznych, przez co ka≈ºda decyzja marketingowa jest chaotyczna, a komunikacja niesp√≥jna. Tracisz klient√≥w, zanim w og√≥le Ciƒô zauwa≈ºƒÖ, a ci, kt√≥rzy zostajƒÖ, wybierajƒÖ Ciƒô tylko cenƒÖ. To wymaga pilnej interwencji i budowy strategicznych podstaw od zera.';
                        } else if (finalScore <= 25) {
                            title = 'Pora na strategiczne podstawy';
                            description = 'Masz pojedyncze elementy brandingu, ale brakuje im sp√≥jnej strategii. Twoja marka nie ma jasnej to≈ºsamo≈õci, przez co trudno Ci siƒô wyr√≥≈ºniƒá i budowaƒá trwa≈Çe relacje z klientami. Dzia≈Çasz reaktywnie zamiast strategicznie. Nadszed≈Ç czas, aby zbudowaƒá solidne fundamenty marki.';
                        } else if (finalScore <= 35) {
                            title = 'Dobra baza, brakuje sp√≥jno≈õci';
                            description = 'Masz solidne podstawy, ale Twoja marka dzia≈Ça w zrywach. Raz komunikacja jest ≈õwietna, a za chwilƒô przypadkowa. Masz potencja≈Ç, ale marnujesz go przez brak konsekwencji i systemowego podej≈õcia. Potrzebujesz uporzƒÖdkowaƒá to, co masz, i stworzyƒá sp√≥jny system komunikacji.';
                        } else if (finalScore <= 45) {
                            title = 'Silna pozycja, potencja≈Ç wzrostu';
                            description = 'Twoja marka jest w dobrej formie i zaczyna pracowaƒá na TwojƒÖ korzy≈õƒá. Masz jasnƒÖ to≈ºsamo≈õƒá i sp√≥jnƒÖ komunikacjƒô, ale wciƒÖ≈º jest przestrze≈Ñ do optymalizacji. Z odpowiednimi udoskonaleniami mo≈ºesz przej≈õƒá na wy≈ºszy poziom i zdominowaƒá swojƒÖ kategoriƒô.';
                        } else if (finalScore <= 54) {
                            title = 'Zaawansowana strategia marki';
                            description = 'Gratulacje. Twoja marka to silne aktywo biznesowe, kt√≥re aktywnie wspiera Tw√≥j rozw√≥j. Masz sp√≥jnƒÖ strategiƒô, wyrazistƒÖ to≈ºsamo≈õƒá i skutecznƒÖ komunikacjƒô. Jeste≈õ w czo≈Ç√≥wce swojej bran≈ºy. Teraz czas na szlifowanie detali i utrzymanie tej przewagi konkurencyjnej.';
                        } else { // Wynik 55-60
                            title = 'Mistrzostwo brandingowe';
                            description = 'Jeste≈õ w elicie. Twoja marka to autonomiczny lider, kt√≥ry pracuje 24/7 ‚Äì sprzedaje, gdy Ty ≈õpisz, przyciƒÖga najlepsze talenty i pozwala dyktowaƒá warunki. Posiadasz przewagƒô, kt√≥ra definiuje zasady gry w Twojej kategorii. To nie jest ju≈º tylko "wizerunek" ‚Äì to potƒô≈ºne aktywo biznesowe generujƒÖce realny zysk.';
                        }

                        // Save to global variables (if needed)
                        finalResultTitle = title;
                        finalResultDesc = description;
 
                        // Rozpocznij analizƒô AI w tle podczas gdy grafika jest nadal widoczna
                        fetch(`${API_BASE_URL}/api/analyze`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                score: finalScore,
                                answers: answers,
                                userName: userName,
                                brandName: brandName,
                                userSegment: userSegment
                            }),
                        })
                        .then(response => { if (!response.ok) { throw new Error('B≈ÇƒÖd serwera.'); } return response.json(); })
                        .then(data => {
                            finalAiText = data.analysis;
                            // Prepare AI text for screen 2
                            const aiTextElement = document.getElementById('ai-analysis-text');
                            aiTextElement.innerText = finalAiText;
                        })
                        .catch(error => {
                            console.error('B≈ÇƒÖd:', error);
                            finalAiText = 'WystƒÖpi≈Ç b≈ÇƒÖd podczas ≈ÇƒÖczenia z serwerem analizy. Spr√≥buj ponownie p√≥≈∫niej.';
                            const aiTextElement = document.getElementById('ai-analysis-text');
                            aiTextElement.innerText = finalAiText;
                        })
                        .finally(() => {
                            // Hide loader and show SCREEN 1 (Shareable Graphic)
                            const loader = document.getElementById('pre-results-loader');
                            loader.classList.add('fade-out');

                            setTimeout(() => {
                                loader.style.display = 'none';

                                // Draw shareable graphic
                                drawShareableGraphic(finalScore, title, description);

                                // Show Screen 1
                                showResultScreen(1);

                                // Hide AI loader in Screen 2, show AI text
                                document.getElementById('ai-loader-screen2').style.display = 'none';
                                document.getElementById('ai-analysis-text').style.display = 'block';
                            }, 400);
                        });
 
                    } else {
                        width++;
                        progressBar.style.width = width + '%';

                    }
                }
            }
 
        };

            // Old download button (legacy - kept for compatibility if old HTML exists)
            if (downloadBtn) {
            downloadBtn.addEventListener('click', () => {
                const originalButtonText = downloadBtn.innerText;
                downloadBtn.innerText = 'GENEROWANIE...';
                downloadBtn.disabled = true;
 
                const printableArea = document.createElement('div');
                document.body.appendChild(printableArea);
 
                Object.assign(printableArea.style, {
                    width: '800px', position: 'absolute', top: '-9999px', left: '-9999px',
                    backgroundColor: '#0F0F0F', fontFamily: 'Satoshi, sans-serif',
                    padding: '40px', textAlign: 'center', color: '#D8D8D8'
                });
 
                const logoHTML = document.getElementById('logo-container-results').innerHTML;
                const signatureHTML = document.querySelector('#results-content .signature-footer').innerHTML;
 
                // NOWA LOGIKA - Odczytujemy styl po≈õwiaty z widocznej karty
                const resultCardVisible = document.querySelector('.result-card');
                const glowStyle = {
                    border: resultCardVisible.style.borderColor ? `1px solid ${resultCardVisible.style.borderColor}` : '1px solid #2C2C2C',
                    boxShadow: resultCardVisible.style.boxShadow || 'none'
                };
 
                const printableResultCard = document.createElement('div');
                Object.assign(printableResultCard.style, {
                    background: '#0F0F0F', padding: '30px', borderRadius: '12px',
                    marginTop: '20px', textAlign: 'center',
                    border: glowStyle.border,
                    boxShadow: glowStyle.boxShadow
                });
 
                const resultCardTitle = document.createElement('h3');
                resultCardTitle.style.fontSize = '1.5em';
                resultCardTitle.style.fontWeight = '700';
                resultCardTitle.style.color = '#D8D8D8';
                resultCardTitle.style.marginBottom = '15px';
                resultCardTitle.style.lineHeight = '1.1';
                resultCardTitle.innerText = finalResultTitle;
 
                const resultCardDesc = document.createElement('p');
                resultCardDesc.style.fontSize = '1em';
                resultCardDesc.style.color = '#707070';
                resultCardDesc.style.lineHeight = '1.7';
                resultCardDesc.style.fontWeight = '400';
                resultCardDesc.innerText = finalResultDesc;
 
                printableResultCard.appendChild(resultCardTitle);
                printableResultCard.appendChild(resultCardDesc);
 
                // Reszta budowania PNG pozostaje bez zmian
                const logoDiv = document.createElement('div');
                logoDiv.style.textAlign = 'center';
                logoDiv.style.marginBottom = '40px';
                logoDiv.innerHTML = logoHTML;
 
                const mainTitle = document.createElement('h2');
                mainTitle.style.fontSize = '2em';
                mainTitle.style.fontWeight = '700';
                mainTitle.style.color = '#D8D8D8';
                mainTitle.style.marginBottom = '25px';
                mainTitle.style.lineHeight = '1.1';
                mainTitle.innerText = 'Twoja diagnoza';
 
                const scoreContainer = document.createElement('div');
                scoreContainer.style.fontSize = '3em';
                scoreContainer.style.fontWeight = '700';
                scoreContainer.style.color = '#D8D8D8';
                scoreContainer.style.lineHeight = '1.1';
                scoreContainer.innerHTML = `<span style="color: #F4F4F4; font-size: 2em;">${finalScore}</span> / 60`;
 
                const aiCard = document.createElement('div');
                 Object.assign(aiCard.style, {
                    background: '#0F0F0F', padding: '30px', borderRadius: '12px',
                    border: '1px solid #2C2C2C', marginTop: '20px', textAlign: 'center'
                });
 
                const aiCardTitle = document.createElement('h3');
                aiCardTitle.style.fontSize = '1.5em';
                aiCardTitle.style.fontWeight = '700';
                aiCardTitle.style.color = '#D8D8D8';
                aiCardTitle.style.marginBottom = '15px';
                aiCardTitle.style.lineHeight = '1.1';
                aiCardTitle.innerText = 'Kluczowe wnioski z analizy';
 
                const aiCardText = document.createElement('p');
                aiCardText.style.fontSize = '1em';
                aiCardText.style.color = '#707070';
                aiCardText.style.lineHeight = '1.7';
                aiCardText.style.fontWeight = '400';
                aiCardText.innerText = finalAiText;
 
                aiCard.appendChild(aiCardTitle);
                aiCard.appendChild(aiCardText);
 
                const signatureDiv = document.createElement('div');
                Object.assign(signatureDiv.style, {
                    textAlign: 'center', marginTop: '50px',
                    borderTop: '1px solid #2C2C2C', paddingTop: '30px'
                });
                signatureDiv.innerHTML = signatureHTML;
 
                printableArea.appendChild(logoDiv);
                printableArea.appendChild(mainTitle);
                printableArea.appendChild(scoreContainer);
                printableArea.appendChild(printableResultCard); // U≈ºywamy nowej karty z po≈õwiatƒÖ
                printableArea.appendChild(aiCard);
                printableArea.appendChild(signatureDiv);
 
                document.body.appendChild(printableArea);
 
                html2canvas(printableArea, { scale: 2, useCORS: true })
                .then(canvas => {
                    let downloadLink = document.createElement('a');
                    downloadLink.setAttribute('download', 'Diagnoza-Marki.png');
                    downloadLink.setAttribute('href', canvas.toDataURL('image/png'));
                    downloadLink.click();
                }).catch(err => {
                    console.error('B≈ÇƒÖd podczas generowania obrazu:', err);
                    alert('WystƒÖpi≈Ç b≈ÇƒÖd podczas generowania obrazu.');
                }).finally(() => {
                    document.body.removeChild(printableArea);
                    downloadBtn.innerText = originalButtonText;
                    downloadBtn.disabled = false;
                });
            });
            }

            // === NEW: Event listeners for 3-screen flow ===

            // Download graphic from canvas
            const downloadGraphicBtn = document.getElementById('download-graphic-btn');
            if (downloadGraphicBtn) {
                downloadGraphicBtn.addEventListener('click', () => {
                    const canvas = document.getElementById('shareable-canvas');
                    if (!canvas) return;

                    const originalText = downloadGraphicBtn.innerHTML;
                    downloadGraphicBtn.innerHTML = '‚è≥ Generowanie...';
                    downloadGraphicBtn.disabled = true;

                    try {
                        canvas.toBlob((blob) => {
                            const url = URL.createObjectURL(blob);
                            const link = document.createElement('a');
                            link.download = `audyt-marki-${userName || 'wynik'}.png`;
                            link.href = url;
                            link.click();
                            URL.revokeObjectURL(url);

                            downloadGraphicBtn.innerHTML = originalText;
                            downloadGraphicBtn.disabled = false;
                        }, 'image/png');
                    } catch (error) {
                        console.error('B≈ÇƒÖd podczas pobierania grafiki:', error);
                        alert('WystƒÖpi≈Ç b≈ÇƒÖd podczas pobierania grafiki.');
                        downloadGraphicBtn.innerHTML = originalText;
                        downloadGraphicBtn.disabled = false;
                    }
                });
            }

            // Go to analysis (Screen 2)
            const goToAnalysisBtn = document.getElementById('go-to-analysis-btn');
            if (goToAnalysisBtn) {
                goToAnalysisBtn.addEventListener('click', () => {
                    showResultScreen(2);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }

            // Go to CTA hub (Screen 3)
            const goToCtaBtn = document.getElementById('go-to-cta-btn');
            if (goToCtaBtn) {
                goToCtaBtn.addEventListener('click', () => {
                    showResultScreen(3);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }

            updateScaleDescriptions();
            window.addEventListener('resize', updateScaleDescriptions);
            updateUI();
            // Dodajemy obs≈Çugƒô przycisku "Zacznij od nowa"
            document.addEventListener('click', e => {
 
             if (e.target.matches('#restart-btn')) {
                location.reload();
            }
        });
 
        });
    </script>
</body>
</html>